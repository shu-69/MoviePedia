"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[522],{6031:(I,T,a)=>{a.d(T,{N:()=>g});var l=a(5879),v=a(6814);const f=function(p,u,e){return{"max-width":p,width:u,height:e}},b=function(p,u,e,r,P){return{"max-height":p,"border-radius":u,height:e,"object-fit":r,background:P}};let g=(()=>{class p{constructor(){this.src="",this.compressedImg="",this.parentMaxWidth="100%",this.parentWidth="fit-content",this.parentHeight="100%",this.imgMaxHeight="100%",this.imgBorderRadius="14px",this.imgHeight="100%",this.imgObjectFit="cover",this.imgBackground=""}ngOnInit(){}}return p.\u0275fac=function(e){return new(e||p)},p.\u0275cmp=l.Xpm({type:p,selectors:[["movie-tile"]],inputs:{src:"src",compressedImg:"compressedImg",parentMaxWidth:"parentMaxWidth",parentWidth:"parentWidth",parentHeight:"parentHeight",imgMaxHeight:"imgMaxHeight",imgBorderRadius:"imgBorderRadius",imgHeight:"imgHeight",imgObjectFit:"imgObjectFit",imgBackground:"imgBackground"},decls:2,vars:13,consts:[[1,"parent",3,"ngStyle"],[3,"src","ngStyle"]],template:function(e,r){1&e&&(l.TgZ(0,"section",0),l._UZ(1,"img",1),l.qZA()),2&e&&(l.Q6J("ngStyle",l.kEZ(3,f,r.parentMaxWidth,r.parentWidth,r.parentHeight)),l.xp6(1),l.Q6J("src",r.src,l.LSH)("ngStyle",l.qbA(7,b,r.imgMaxHeight,r.imgBorderRadius,r.imgHeight,r.imgObjectFit,r.imgBackground)))},dependencies:[v.PC]}),p})()},4019:(I,T,a)=>{a.d(T,{J:()=>p,a:()=>g});var l=a(5861);const v=JSON.parse('{"P":{"X-RapidAPI-Key":"61631fd008msh31430e1aa47f61cp1fe7dajsn062be728c5a9","X-RapidAPI-Host":"moviesdatabase.p.rapidapi.com"}}');var f=a(5879),b=a(9862),g=(()=>((g=g||{}).MostPopularMovies="most_pop_movies",g.MostPopularSeries="most_pop_series",g.TopBoxOffice200="top_boxoffice_200",g.TopBoxOfficeLastWeekend10="top_boxoffice_last_weekend_10",g.TopRated250="top_rated_250",g.TopRatedEnglish250="top_rated_english_250",g.TopRatedLowest100="top_rated_lowest_100",g.TopRatedSeries250="top_rated_series_250",g.Titles="titles",g))();let p=(()=>{class u{constructor(r){this.http=r,this.RapidApi=v.P}getUpcoming(r){var P=this;return(0,l.Z)(function*(){return P.http.get("https://moviesdatabase.p.rapidapi.com/titles/x/upcoming",{headers:{"X-RapidAPI-Key":"61631fd008msh31430e1aa47f61cp1fe7dajsn062be728c5a9","X-RapidAPI-Host":"moviesdatabase.p.rapidapi.com"},params:{limit:r||10}})})()}getMoviesByTitle(r,P){var _=this;return(0,l.Z)(function*(){const C={headers:{"X-RapidAPI-Key":"61631fd008msh31430e1aa47f61cp1fe7dajsn062be728c5a9","X-RapidAPI-Host":"moviesdatabase.p.rapidapi.com"},params:{list:r||"",limit:P||""}};return yield _.http.get("https://moviesdatabase.p.rapidapi.com/titles",C)})()}search(r,P){var _=this;return(0,l.Z)(function*(){const M="https://moviesdatabase.p.rapidapi.com/titles/search/keyword/"+r,C={headers:{"X-RapidAPI-Key":"61631fd008msh31430e1aa47f61cp1fe7dajsn062be728c5a9","X-RapidAPI-Host":"moviesdatabase.p.rapidapi.com"},params:{page:P||""}};return yield _.http.get(M,C)})()}}return u.\u0275fac=function(r){return new(r||u)(f.LFG(b.eN))},u.\u0275prov=f.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},522:(I,T,a)=>{a.r(T),a.d(T,{SearchTabPageModule:()=>L});var l=a(6814),v=a(95),f=a(7852),b=a(4299),g=a(5861),p=a(254),u=a(8610),e=a(5879),r=a(4019),P=a(9862),_=a(6593);let M=(()=>{class i{constructor(t,n,s){this.http=t,this.sanitizer=n,this.toastCtrl=s}showToast(t,n="bottom",s="ios"){var o=this;return(0,g.Z)(function*(){let c={message:t,position:n,mode:s,duration:3e3};(yield o.toastCtrl.create(c)).present()})()}getBase64FromUrl(t,n=!1,s=.8){return new Promise((o,c)=>{this.http.get(t,{responseType:"blob"}).subscribe(h=>{n?this.compressImage(h,s).then(m=>{this.readImage(m,o,c)}).catch(m=>{c(m)}):this.readImage(h,o,c)},h=>{c(h)})})}compressImage(t,n){return new Promise((s,o)=>{const c=new FileReader;c.onload=()=>{const h=new Image;h.src=c.result,h.onload=()=>{const m=document.createElement("canvas"),y=m.getContext("2d");let R=h.width,S=h.height;R>S?R>800&&(S*=800/R,R=800):S>800&&(R*=800/S,S=800),m.width=R,m.height=S,null==y||y.drawImage(h,0,0,R,S),m.toBlob(U=>{s(U)},"image/jpeg",n)}},c.onerror=()=>{o("Error reading image file.")},c.readAsDataURL(t)})}readImage(t,n,s){const o=new FileReader;o.onloadend=()=>{const c=o.result;this.sanitizer.bypassSecurityTrustUrl(c),n(c)},o.onerror=()=>{s("Error reading image file.")},o.readAsDataURL(t)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(P.eN),e.LFG(_.H7),e.LFG(f.yF))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var C=a(959),B=a(6031);const A=["infiniteScroll"],Z=["searchInput"];function F(i,d){1&i&&e._UZ(0,"ion-progress-bar",13)}function w(i,d){if(1&i&&(e.TgZ(0,"span",14),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.searchResultText)}}function H(i,d){if(1&i&&e._UZ(0,"movie-tile",15),2&i){const t=d.$implicit,n=e.oxw();e.Q6J("src",t.image)("imgObjectFit",t.image==n.imageErrorAlt?"none":"cover")("imgBackground",t.image==n.imageErrorAlt?"rgb(225 225 225 / 10%)":"")}}function J(i,d){if(1&i&&(e.TgZ(0,"div",16)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.hij("No Result for '",t.currentPrompt,"'")}}function D(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"ion-infinite-scroll",17,18),e.NdJ("ionInfinite",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onIonInfinite())}),e._UZ(2,"ion-infinite-scroll-content"),e.qZA()}}const j=[{path:"",component:(()=>{class i{constructor(t,n,s,o){this.IMDBServices=t,this.generalServices=n,this.speechRecognition=s,this.changeDetectorRef=o,this.imageErrorAlt="assets/pichonicons/icons8_image_30px.png",this.isSearching=!1,this.noResult=!1,this.searchResults=[],this.searchResultText="",this.nextPage=void 0,this.currentPrompt=""}ngOnInit(){}ionViewWillEnter(){p.A_.show(),p.A_.setOverlaysWebView({overlay:!1}),p.A_.setBackgroundColor({color:u.S.COLORS.PRIMARY_BACKGROUND}),p.A_.setStyle({style:p.bg.Dark})}doSearch(t,n=!1,s="1"){var o=this;return(0,g.Z)(function*(){console.log("Searching",t),n&&(o.searchResults=[]),o.isSearching=!0,(yield o.IMDBServices.search(t.toLowerCase(),s)).subscribe({next:c=>{var h,m;console.log("Got data",c),o.isSearching=!1,o.noResult=0==c.entries,o.searchResultText=`Search results for '${t}'`,o.nextPage=c.next?c.next.split("page=")[1]:void 0,o.currentPrompt=t,null===(h=o.infiniteScroll)||void 0===h||h.complete(),null===(m=c.results)||void 0===m||m.map(y=>{o.searchResults.push({image:y.primaryImage?y.primaryImage.url:o.imageErrorAlt})}),o.changeDetectorRef.detectChanges()}})})()}startSpeechRecognization(){var t=this;return(0,g.Z)(function*(){try{(yield t.speechRecognition.isRecognitionAvailable())?t.speechRecognition.hasPermission().then(n=>{n?t.speechRecognition.startListening({}).subscribe(o=>{console.log(o),t.currentPrompt=o[0],t.doSearch(o[0],!0),t.changeDetectorRef.detectChanges()},o=>t.generalServices.showToast("Please try again!")):t.speechRecognition.requestPermission().then(()=>t.startSpeechRecognization(),()=>t.generalServices.showToast("Mic permission required for Speech Recognition"))}):t.generalServices.showToast("Device doesn't support Speech Recognition")}catch{t.generalServices.showToast("Device doesn't support Speech Recognition")}})()}onIonInfinite(){var t=this;return(0,g.Z)(function*(){t.nextPage&&(yield t.doSearch(t.currentPrompt,!1,t.nextPage))})()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(r.J),e.Y36(M),e.Y36(C.M),e.Y36(e.sBO))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-search-tab"]],viewQuery:function(t,n){if(1&t&&(e.Gf(A,5),e.Gf(Z,5)),2&t){let s;e.iGM(s=e.CRH())&&(n.infiniteScroll=s.first),e.iGM(s=e.CRH())&&(n.searchInput=s.first)}},decls:13,vars:7,consts:[[3,"fullscreen"],[1,"parent"],[1,"searchBar"],["src","../../../assets/iconsaxicons/outline/search-normal-1.svg","alt","",1,"searchIcon"],["type","text","placeholder","Search for Movie/Series",3,"ngModel","input","change","ngModelChange"],["searchInput",""],["src","../../../assets/iconsaxicons/outline/microphone-2.svg","alt","",1,"micIcon",3,"click"],["class","searchProgressBar","type","indeterminate",4,"ngIf"],["class","searchResulText",4,"ngIf"],[1,"resultsContainer"],["imgBorderRadius","6px",3,"src","imgObjectFit","imgBackground",4,"ngFor","ngForOf"],["class","noResults",4,"ngIf"],[3,"ionInfinite",4,"ngIf"],["type","indeterminate",1,"searchProgressBar"],[1,"searchResulText"],["imgBorderRadius","6px",3,"src","imgObjectFit","imgBackground"],[1,"noResults"],[3,"ionInfinite"],["infiniteScroll",""]],template:function(t,n){if(1&t){const s=e.EpF();e.TgZ(0,"ion-content",0)(1,"section",1)(2,"div",2),e._UZ(3,"img",3),e.TgZ(4,"input",4,5),e.NdJ("input",function(){return n.noResult=!1})("change",function(){e.CHM(s);const c=e.MAs(5);return e.KtG(n.doSearch(c.value,!0))})("ngModelChange",function(c){return n.currentPrompt=c}),e.qZA(),e.TgZ(6,"img",6),e.NdJ("click",function(){return n.startSpeechRecognization()}),e.qZA()(),e.YNc(7,F,1,0,"ion-progress-bar",7),e.YNc(8,w,2,1,"span",8),e.TgZ(9,"div",9),e.YNc(10,H,1,3,"movie-tile",10),e.qZA(),e.YNc(11,J,3,1,"div",11),e.YNc(12,D,3,0,"ion-infinite-scroll",12),e.qZA()()}2&t&&(e.Q6J("fullscreen",!0),e.xp6(4),e.Q6J("ngModel",n.currentPrompt),e.xp6(3),e.Q6J("ngIf",n.isSearching),e.xp6(1),e.Q6J("ngIf",n.searchResults&&0!=n.searchResults.length&&""!=n.searchResultText&&!n.noResult),e.xp6(2),e.Q6J("ngForOf",n.searchResults),e.xp6(1),e.Q6J("ngIf",n.noResult&&""!=n.currentPrompt),e.xp6(1),e.Q6J("ngIf",n.nextPage))},dependencies:[l.sg,l.O5,v.Fj,v.JJ,v.On,f.W2,f.ju,f.MB,f.X7,B.N],styles:["ion-content[_ngcontent-%COMP%]{--background: black}ion-content[_ngcontent-%COMP%]   section.parent[_ngcontent-%COMP%]{display:flex;flex-flow:column;gap:20px;padding:20px}ion-content[_ngcontent-%COMP%]   section.parent[_ngcontent-%COMP%]   .searchBar[_ngcontent-%COMP%]{display:flex;width:100%;background:rgba(255,255,255,.1);border-radius:12px;padding:15px 20px;gap:15px;font-family:Poppins-Regular;font-size:18px}ion-content[_ngcontent-%COMP%]   section.parent[_ngcontent-%COMP%]   .searchBar[_ngcontent-%COMP%]   .searchIcon[_ngcontent-%COMP%]{filter:brightness(0) saturate(100%) invert(96%) sepia(0%) saturate(7489%) hue-rotate(171deg) brightness(102%) contrast(106%)}ion-content[_ngcontent-%COMP%]   section.parent[_ngcontent-%COMP%]   .searchBar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:transparent;border:none;outline:none;color:#fff}ion-content[_ngcontent-%COMP%]   section.parent[_ngcontent-%COMP%]   .searchBar[_ngcontent-%COMP%]   .micIcon[_ngcontent-%COMP%]{filter:brightness(0) saturate(100%) invert(96%) sepia(0%) saturate(7489%) hue-rotate(171deg) brightness(102%) contrast(106%)}ion-content[_ngcontent-%COMP%]   section.parent[_ngcontent-%COMP%]   .searchProgressBar[_ngcontent-%COMP%]{--background: rgb(255 255 255 / 10%);--progress-background: rgb(255 255 255 / 20%)}ion-content[_ngcontent-%COMP%]   section.parent[_ngcontent-%COMP%]   .searchResulText[_ngcontent-%COMP%]{font-family:Poppins-Regular;font-size:16px}ion-content[_ngcontent-%COMP%]   section.parent[_ngcontent-%COMP%]   .resultsContainer[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(1,calc(50% - 10px) calc(50% - 10px));justify-content:space-between;gap:20px}ion-content[_ngcontent-%COMP%]   section.parent[_ngcontent-%COMP%]   .noResults[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:15px;font-family:Poppins-Regular}"]}),i})()}];let E=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[b.Bz.forChild(j),b.Bz]}),i})();var G=a(822);let L=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[l.ez,v.u5,f.Pc,E,G.K]}),i})()}}]);